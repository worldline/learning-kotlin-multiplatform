import{_ as s,c as a,a as e,o as p}from"./app-CarcV5a4.js";const t="/learning-kotlin-multiplatform/assets/diagramme_sql-CFrbOXnm.png",l={};function i(o,n){return p(),a("div",null,n[0]||(n[0]=[e(`<h1 id="local-database" tabindex="-1"><a class="header-anchor" href="#local-database"><span>Local Database</span></a></h1><div class="hint-container warning"><p class="hint-container-title">Deprecated section</p><p><code>SQL delight</code> is for now no more compatible with the new default <strong>WASM</strong> template for WebApp application.</p><p>If you still want to use it you can revert to the old <strong>Js(IR)</strong> template.</p><p>Notice that for now this is the <strong>only</strong> Web target compatible database library for KMP</p></div><p>SQLDelight generates typesafe Kotlin APIs from your SQL statements. It verifies your schema, statements, and migrations at compile-time and provides IDE features like autocomplete and refactoring which make writing and maintaining SQL simple.</p><p>SQLDelight understands your existing SQL schema.</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> hockey_player <span class="token punctuation">(</span></span>
<span class="line">  id <span class="token keyword">INTEGER</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> AUTOINCREMENT<span class="token punctuation">,</span></span>
<span class="line">  name <span class="token keyword">TEXT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">  number <span class="token keyword">INTEGER</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>It generates typesafe code for any labeled SQL statements.</p><div class="hint-container warning"><p class="hint-container-title">Warning</p><p>Be carefull with SQL Delight , the project and his dependancies just move from <code>com.squareup.sqldelight.*</code> to <code>app.cash.sqldelight.*</code></p><p>Pay attention also with beta, alpha version of Android studio that could produce bugs on gradle task management for code generation of SQL Delight databases.</p></div><h2 id="ðŸ§ª-add-sqldelight-db-to-your-quizz" tabindex="-1"><a class="header-anchor" href="#ðŸ§ª-add-sqldelight-db-to-your-quizz"><span>ðŸ§ª Add sqldelight db to your quizz</span></a></h2><blockquote><p>Refer to the multiplatform implementation of SQLDelight in official Github pages ðŸ‘‰ <a href="https://cashapp.github.io/sqldelight/2.0.0/multiplatform_sqlite/" target="_blank" rel="noopener noreferrer">https://cashapp.github.io/sqldelight/2.0.0/multiplatform_sqlite/</a></p></blockquote><h4 id="add-the-correct-dependancies-to-the-project" tabindex="-1"><a class="header-anchor" href="#add-the-correct-dependancies-to-the-project"><span>Add the correct dependancies to the project</span></a></h4><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line">plugins <span class="token punctuation">{</span></span>
<span class="line"><span class="token operator">..</span><span class="token punctuation">.</span></span>
<span class="line">    <span class="token function">alias</span><span class="token punctuation">(</span>libs<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span>sqldelight<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token operator">..</span><span class="token punctuation">.</span></span>
<span class="line"> sourceSets <span class="token punctuation">{</span></span>
<span class="line">         commonMain<span class="token punctuation">.</span><span class="token function">dependencies</span> <span class="token punctuation">{</span></span>
<span class="line">              <span class="token operator">..</span><span class="token punctuation">.</span></span>
<span class="line">            <span class="token function">implementation</span><span class="token punctuation">(</span>libs<span class="token punctuation">.</span>sqldelight<span class="token punctuation">.</span>runtime<span class="token punctuation">)</span></span>
<span class="line">            <span class="token function">implementation</span><span class="token punctuation">(</span>libs<span class="token punctuation">.</span>sqldelight<span class="token punctuation">.</span>coroutines<span class="token punctuation">.</span>extensions<span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        </span>
<span class="line">         androidMain<span class="token punctuation">.</span><span class="token function">dependencies</span> <span class="token punctuation">{</span></span>
<span class="line">               <span class="token operator">..</span><span class="token punctuation">.</span></span>
<span class="line">                 <span class="token function">implementation</span><span class="token punctuation">(</span>libs<span class="token punctuation">.</span>sqldelight<span class="token punctuation">.</span>android<span class="token punctuation">.</span>driver<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">    <span class="token operator">..</span><span class="token punctuation">.</span></span>
<span class="line">        iosMain<span class="token punctuation">.</span><span class="token function">dependencies</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token operator">..</span><span class="token punctuation">.</span></span>
<span class="line">                 <span class="token function">implementation</span><span class="token punctuation">(</span>libs<span class="token punctuation">.</span>sqldelight<span class="token punctuation">.</span>ios<span class="token punctuation">.</span>driver<span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        </span>
<span class="line">         desktopMain<span class="token punctuation">.</span><span class="token function">dependencies</span> <span class="token punctuation">{</span></span>
<span class="line">               <span class="token operator">..</span><span class="token punctuation">.</span></span>
<span class="line">                 <span class="token function">implementation</span><span class="token punctuation">(</span>libs<span class="token punctuation">.</span>sqldelight<span class="token punctuation">.</span>jvm<span class="token punctuation">.</span>driver<span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        wasmJsMain<span class="token punctuation">.</span><span class="token function">dependencies</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token operator">..</span><span class="token punctuation">.</span></span>
<span class="line">            <span class="token function">implementation</span><span class="token punctuation">(</span>libs<span class="token punctuation">.</span>sqldelight<span class="token punctuation">.</span>webworker<span class="token punctuation">.</span>driver<span class="token punctuation">)</span></span>
<span class="line">            <span class="token function">implementation</span><span class="token punctuation">(</span><span class="token function">npm</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;sql.js&quot;</span></span><span class="token punctuation">,</span> libs<span class="token punctuation">.</span>versions<span class="token punctuation">.</span>sqlJs<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token function">implementation</span><span class="token punctuation">(</span><span class="token function">devNpm</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;copy-webpack-plugin&quot;</span></span><span class="token punctuation">,</span> libs<span class="token punctuation">.</span>versions<span class="token punctuation">.</span>webPackPlugin<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token operator">..</span><span class="token punctuation">.</span></span>
<span class="line"></span>
<span class="line">        sqldelight <span class="token punctuation">{</span></span>
<span class="line">            databases <span class="token punctuation">{</span></span>
<span class="line">                <span class="token function">create</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;Database&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                    packageName <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;com.myapplication.common.cache&quot;</span></span></span>
<span class="line">                    generateAsync <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">                    verifyMigrations <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            linkSqlite <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="create-the-native-sql-driver-factory-and-use-it-for-creating-the-db-with-actual-expect-kotlin-keywords" tabindex="-1"><a class="header-anchor" href="#create-the-native-sql-driver-factory-and-use-it-for-creating-the-db-with-actual-expect-kotlin-keywords"><span>Create the native SQL driver factory and use it for creating the DB with <code>actual</code>/<code>expect</code> kotlin keywords</span></a></h4><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">actual</span> <span class="token keyword">suspend</span> <span class="token keyword">fun</span> <span class="token function">provideDbDriver</span><span class="token punctuation">(</span></span>
<span class="line">    schema<span class="token operator">:</span> SqlSchema<span class="token operator">&lt;</span>QueryResult<span class="token punctuation">.</span>AsyncValue<span class="token operator">&lt;</span>Unit<span class="token operator">&gt;</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token operator">:</span> SqlDriver <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token function">JdbcSqliteDriver</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;jdbc:sqlite:quiz.db&quot;</span></span><span class="token punctuation">,</span> <span class="token function">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">also</span> <span class="token punctuation">{</span> schema<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">actual</span> <span class="token keyword">suspend</span> <span class="token keyword">fun</span> <span class="token function">provideDbDriver</span><span class="token punctuation">(</span></span>
<span class="line">    schema<span class="token operator">:</span> SqlSchema<span class="token operator">&lt;</span>QueryResult<span class="token punctuation">.</span>AsyncValue<span class="token operator">&lt;</span>Unit<span class="token operator">&gt;</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token operator">:</span> SqlDriver <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token function">NativeSqliteDriver</span><span class="token punctuation">(</span>schema<span class="token punctuation">.</span><span class="token function">synchronous</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">&quot;quiz.db&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">actual</span> <span class="token keyword">suspend</span> <span class="token keyword">fun</span> <span class="token function">provideDbDriver</span><span class="token punctuation">(</span></span>
<span class="line">    schema<span class="token operator">:</span> SqlSchema<span class="token operator">&lt;</span>QueryResult<span class="token punctuation">.</span>AsyncValue<span class="token operator">&lt;</span>Unit<span class="token operator">&gt;</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token operator">:</span> SqlDriver <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token function">AndroidSqliteDriver</span><span class="token punctuation">(</span>schema<span class="token punctuation">.</span><span class="token function">synchronous</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> QuizApp<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">&quot;quiz.db&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">actual</span> <span class="token keyword">suspend</span> <span class="token keyword">fun</span> <span class="token function">provideDbDriver</span><span class="token punctuation">(</span>schema<span class="token operator">:</span> SqlSchema<span class="token operator">&lt;</span>QueryResult<span class="token punctuation">.</span>AsyncValue<span class="token operator">&lt;</span>Unit<span class="token operator">&gt;</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> SqlDriver <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token function">WebWorkerDriver</span><span class="token punctuation">(</span></span>
<span class="line">        <span class="token function">jsWorker</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">fun</span> <span class="token function">jsWorker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Worker <span class="token operator">=</span></span>
<span class="line">    <span class="token function">js</span><span class="token punctuation">(</span><span class="token string-literal multiline"><span class="token string">&quot;&quot;&quot;new Worker(new URL(&quot;./sqljs.worker.js&quot;, import.meta.url))&quot;&quot;&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>for the WebWorker you need to create a webpack.config.d/config.js file in the root of your project and a webpack.config.d/sqljs-config.js for the web worker to be able to use the sql wasm library.</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> TerserPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;terser-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">config<span class="token punctuation">.</span>optimization <span class="token operator">=</span> config<span class="token punctuation">.</span>optimization <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">config<span class="token punctuation">.</span>optimization<span class="token punctuation">.</span>minimize <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span>
<span class="line">config<span class="token punctuation">.</span>optimization<span class="token punctuation">.</span>minimizer <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">terserOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token literal-property property">mangle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>    <span class="token comment">// Note: By default, mangle is set to true.</span></span>
<span class="line">            <span class="token literal-property property">compress</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// Disable the transformations that reduce the code size.</span></span>
<span class="line">            <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token literal-property property">beautify</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token comment">// {project}/webpack.config.d/sqljs.js</span></span>
<span class="line">config<span class="token punctuation">.</span>resolve <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">fallback</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">fs</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">crypto</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> CopyWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;copy-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">config<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token keyword">new</span> <span class="token class-name">CopyWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">patterns</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">            <span class="token string">&#39;../../node_modules/sql.js/dist/sql-wasm.wasm&#39;</span></span>
<span class="line">        <span class="token punctuation">]</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="read-carefully-the-modelisation-uml-below" tabindex="-1"><a class="header-anchor" href="#read-carefully-the-modelisation-uml-below"><span>Read carefully the modelisation UML below</span></a></h4><p><img src="`+t+`" alt="diagram SQL "></p><h4 id="create-you-sqldelight-model-quizdatabase-sq" tabindex="-1"><a class="header-anchor" href="#create-you-sqldelight-model-quizdatabase-sq"><span>Create you SQLDelight model &#39;QuizDatabase.sq&#39;</span></a></h4><h4 id="create-your-database-datasource-by-generating-insert-and-update-suspending-functions" tabindex="-1"><a class="header-anchor" href="#create-your-database-datasource-by-generating-insert-and-update-suspending-functions"><span>Create your Database datasource by generating insert and update suspending functions</span></a></h4><h4 id="update-your-repository-by-instanciating-your-database" tabindex="-1"><a class="header-anchor" href="#update-your-repository-by-instanciating-your-database"><span>Update your repository by instanciating your database</span></a></h4><p>Your repository handle the following cases :</p><ul><li>If there is no network and it&#39;s the first time launch of the app : handle and error</li><li>if there is no network and you have db datas : return on the flow the db data</li><li>if there is network and db data are younger than 5 min : return on the flow the db data</li><li>if there is network and db data are older than 5 min : retourn on the flow the network data and reset db data</li></ul><h2 id="ðŸŽ¯-solutions" tabindex="-1"><a class="header-anchor" href="#ðŸŽ¯-solutions"><span>ðŸŽ¯ Solutions</span></a></h2><details class="hint-container details"><summary>QuizDatabase.sq (ressources of commonMain)*</summary><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> update_time <span class="token punctuation">(</span></span>
<span class="line">     timestamprequest <span class="token keyword">INTEGER</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> update_time<span class="token punctuation">(</span>timestamprequest<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> questions <span class="token punctuation">(</span></span>
<span class="line">    id <span class="token keyword">INTEGER</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span></span>
<span class="line">    label <span class="token keyword">TEXT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">    correctAnswerId <span class="token keyword">INTEGER</span>  <span class="token operator">NOT</span> <span class="token boolean">NULL</span></span>
<span class="line"> <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"> <span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> answers <span class="token punctuation">(</span></span>
<span class="line">    id <span class="token keyword">INTEGER</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">    label <span class="token keyword">TEXT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">    question_id <span class="token keyword">INTEGER</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>id<span class="token punctuation">,</span> question_id<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>question_id<span class="token punctuation">)</span></span>
<span class="line">      <span class="token keyword">REFERENCES</span> questions <span class="token punctuation">(</span>id<span class="token punctuation">)</span></span>
<span class="line">          <span class="token keyword">ON</span> <span class="token keyword">UPDATE</span> <span class="token keyword">CASCADE</span></span>
<span class="line">          <span class="token keyword">ON</span> <span class="token keyword">DELETE</span> <span class="token keyword">CASCADE</span></span>
<span class="line"> <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"> selectUpdateTimestamp:</span>
<span class="line"> <span class="token keyword">SELECT</span> <span class="token operator">*</span></span>
<span class="line"> <span class="token keyword">FROM</span> update_time<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"> insertTimeStamp:</span>
<span class="line"> <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> update_time<span class="token punctuation">(</span>timestamprequest<span class="token punctuation">)</span></span>
<span class="line"> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>:<span class="token keyword">timestamp</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"> deleteTimeStamp:</span>
<span class="line"> <span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> update_time<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"> deleteQuestions:</span>
<span class="line"> <span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> questions<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"> deleteAnswers:</span>
<span class="line"> <span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> answers<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"> selectAllQuestionsWithAnswers:</span>
<span class="line"> <span class="token keyword">SELECT</span> <span class="token operator">*</span></span>
<span class="line"> <span class="token keyword">FROM</span> questions</span>
<span class="line"> <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> answers <span class="token keyword">ON</span> questions<span class="token punctuation">.</span>id <span class="token operator">=</span> answers<span class="token punctuation">.</span>question_id<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"> insertQuestion:</span>
<span class="line"> <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> questions<span class="token punctuation">(</span>id<span class="token punctuation">,</span> label<span class="token punctuation">,</span>correctAnswerId<span class="token punctuation">)</span></span>
<span class="line"> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>?<span class="token punctuation">,</span> ?<span class="token punctuation">,</span> ?<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"> insertAnswer:</span>
<span class="line"> <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> answers<span class="token punctuation">(</span>id<span class="token punctuation">,</span> label<span class="token punctuation">,</span>question_id<span class="token punctuation">)</span></span>
<span class="line"> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>?<span class="token punctuation">,</span> ?<span class="token punctuation">,</span> ?<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><details class="hint-container details"><summary>data/datasources (commonMain)</summary><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">class</span> <span class="token function">SqlDelightDataSource</span><span class="token punctuation">(</span><span class="token keyword">private</span> <span class="token keyword">val</span> database<span class="token operator">:</span> Database<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">var</span> quizQueries <span class="token operator">=</span> database<span class="token punctuation">.</span>quizQuestionQueries</span>
<span class="line"></span>
<span class="line">    <span class="token keyword">suspend</span> <span class="token keyword">fun</span> <span class="token function">getAllQuestions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token operator">&lt;</span>Question<span class="token operator">&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> quizQueries<span class="token punctuation">.</span><span class="token function">selectAllQuestionsWithAnswers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">awaitAsList</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">            <span class="token punctuation">.</span><span class="token function">groupBy</span> <span class="token punctuation">{</span> it<span class="token punctuation">.</span>question_id <span class="token punctuation">}</span></span>
<span class="line">            <span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>questionId<span class="token punctuation">,</span> rowList<span class="token punctuation">)</span> <span class="token operator">-&gt;</span></span>
<span class="line"></span>
<span class="line">                <span class="token function">Question</span><span class="token punctuation">(</span></span>
<span class="line">                    id <span class="token operator">=</span> questionId<span class="token punctuation">,</span></span>
<span class="line">                    label <span class="token operator">=</span> rowList<span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>label<span class="token punctuation">,</span></span>
<span class="line">                    correctAnswerId <span class="token operator">=</span> rowList<span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>correctAnswerId<span class="token punctuation">,</span></span>
<span class="line">                    answers <span class="token operator">=</span> rowList<span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{</span> answer <span class="token operator">-&gt;</span></span>
<span class="line">                        <span class="token function">Answer</span><span class="token punctuation">(</span></span>
<span class="line">                            id <span class="token operator">=</span> answer<span class="token punctuation">.</span>id_<span class="token punctuation">,</span></span>
<span class="line">                            label <span class="token operator">=</span> answer<span class="token punctuation">.</span>label_</span>
<span class="line">                        <span class="token punctuation">)</span></span>
<span class="line">                    <span class="token punctuation">}</span></span>
<span class="line">                <span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">suspend</span> <span class="token keyword">fun</span> <span class="token function">insertQuestions</span><span class="token punctuation">(</span>questions<span class="token operator">:</span> List<span class="token operator">&lt;</span>Question<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        quizQueries<span class="token punctuation">.</span><span class="token function">deleteQuestions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        quizQueries<span class="token punctuation">.</span><span class="token function">deleteAnswers</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        questions<span class="token punctuation">.</span><span class="token function">forEach</span> <span class="token punctuation">{</span> question <span class="token operator">-&gt;</span></span>
<span class="line">            quizQueries<span class="token punctuation">.</span><span class="token function">insertQuestion</span><span class="token punctuation">(</span>question<span class="token punctuation">.</span>id<span class="token punctuation">,</span> question<span class="token punctuation">.</span>label<span class="token punctuation">,</span> question<span class="token punctuation">.</span>correctAnswerId<span class="token punctuation">)</span></span>
<span class="line">            question<span class="token punctuation">.</span>answers<span class="token punctuation">.</span><span class="token function">forEach</span> <span class="token punctuation">{</span> answer <span class="token operator">-&gt;</span></span>
<span class="line">                quizQueries<span class="token punctuation">.</span><span class="token function">insertAnswer</span><span class="token punctuation">(</span>answer<span class="token punctuation">.</span>id<span class="token punctuation">,</span> answer<span class="token punctuation">.</span>label<span class="token punctuation">,</span> question<span class="token punctuation">.</span>id<span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">suspend</span> <span class="token keyword">fun</span> <span class="token function">resetQuestions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        quizQueries<span class="token punctuation">.</span><span class="token function">deleteQuestions</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        quizQueries<span class="token punctuation">.</span><span class="token function">deleteAnswers</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><details class="hint-container details"><summary>QuizRepository.kt</summary><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">class</span> QuizRepository <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">val</span> mockDataSource <span class="token operator">=</span> <span class="token function">MockDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">val</span> quizApiDatasource <span class="token operator">=</span> <span class="token function">QuizApiDatasource</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">var</span> quizKStoreDataSource <span class="token operator">=</span> <span class="token function">KStoreDataSource</span><span class="token punctuation">(</span>AppInitializer<span class="token punctuation">.</span><span class="token function">getKStoreInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">var</span> sqlDelightDataSource <span class="token operator">=</span> <span class="token function">SqlDelightDataSource</span><span class="token punctuation">(</span>AppInitializer<span class="token punctuation">.</span><span class="token function">getDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">!!</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">suspend</span> <span class="token keyword">fun</span> <span class="token function">fetchQuiz</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token operator">&lt;</span>Question<span class="token operator">&gt;</span> <span class="token operator">=</span> quizApiDatasource<span class="token punctuation">.</span><span class="token function">getAllQuestions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>questions</span>
<span class="line"></span>
<span class="line">    <span class="token annotation builtin">@OptIn</span><span class="token punctuation">(</span>ExperimentalTime<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">suspend</span> <span class="token keyword">fun</span> <span class="token function">fetchAndStoreQuiz</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token operator">&lt;</span>Question<span class="token operator">&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        sqlDelightDataSource<span class="token punctuation">.</span><span class="token function">resetQuestions</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">val</span> questions <span class="token operator">=</span> <span class="token function">fetchQuiz</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        sqlDelightDataSource<span class="token punctuation">.</span><span class="token function">insertQuestions</span><span class="token punctuation">(</span>questions<span class="token punctuation">)</span></span>
<span class="line">        quizKStoreDataSource<span class="token punctuation">.</span><span class="token function">setUpdateTimeStamp</span><span class="token punctuation">(</span>Clock<span class="token punctuation">.</span>System<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>epochSeconds<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span> questions</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation builtin">@OptIn</span><span class="token punctuation">(</span>ExperimentalTime<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">suspend</span> <span class="token keyword">fun</span> <span class="token function">updateQuiz</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token operator">&lt;</span>Question<span class="token operator">&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">val</span> lastRequest <span class="token operator">=</span> quizKStoreDataSource<span class="token punctuation">.</span><span class="token function">getUpdateTimeStamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>lastRequest <span class="token operator">==</span> <span class="token number">0L</span> <span class="token operator">||</span> lastRequest <span class="token operator">-</span> Clock<span class="token punctuation">.</span>System<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>epochSeconds <span class="token operator">&gt;</span> <span class="token number">300000</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token function">fetchAndStoreQuiz</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token comment">//quizKStoreDataSource.getAllQuestions()</span></span>
<span class="line">                sqlDelightDataSource<span class="token punctuation">.</span><span class="token function">getAllQuestions</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> NullPointerException<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token function">fetchAndStoreQuiz</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> Exception<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token keyword">return</span> mockDataSource<span class="token punctuation">.</span><span class="token function">generateDummyQuestionsList</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><div class="hint-container tip"><p class="hint-container-title">More databases options</p><p>For not using SQLight ORM, you can use <a href="https://github.com/realm/realm-kotlin" target="_blank" rel="noopener noreferrer"><code>Realm kotlin</code></a> or <a href="https://github.com/xxfast/KStore" target="_blank" rel="noopener noreferrer">KStore</a></p></div><p><strong>âœ… If everything is fine, go to the next chapter â†’</strong></p><h2 id="ðŸ“–-further-reading" tabindex="-1"><a class="header-anchor" href="#ðŸ“–-further-reading"><span>ðŸ“– Further reading</span></a></h2><ul><li><a href="https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-ktor-sqldelight.html" target="_blank" rel="noopener noreferrer">SQL Delight tutorial (obsolete)</a></li><li><a href="https://github.com/cashapp/sqldelight" target="_blank" rel="noopener noreferrer">SQL Delight lib </a></li></ul>`,34)]))}const u=s(l,[["render",i]]),r=JSON.parse('{"path":"/9.database/","title":"Local  Database","lang":"en-US","frontmatter":{"description":"Local Database Deprecated section SQL delight is for now no more compatible with the new default WASM template for WebApp application. If you still want to use it you can revert...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Local  Database\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-09-03T13:19:16.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://worldline.github.io/learning-kotlin-multiplatform/learning-kotlin-multiplatform/9.database/"}],["meta",{"property":"og:title","content":"Local  Database"}],["meta",{"property":"og:description","content":"Local Database Deprecated section SQL delight is for now no more compatible with the new default WASM template for WebApp application. If you still want to use it you can revert..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2025-09-03T13:19:16.000Z"}],["meta",{"property":"article:modified_time","content":"2025-09-03T13:19:16.000Z"}]]},"git":{"updatedTime":1756905556000,"contributors":[{"name":"A187839","username":"A187839","email":"ibrahim.gharbi@worldline.com","commits":5,"url":"https://github.com/A187839"},{"name":"Ibrahim Gharbi","username":"","email":"brah.gharbi@gmail.com","commits":2},{"name":"Brah","username":"Brah","email":"brah.gharbi@gmail.com","commits":5,"url":"https://github.com/Brah"}],"changelog":[{"hash":"e048923a7c69422ad718c1f51701d47d27127830","time":1756905556000,"email":"brah.gharbi@gmail.com","author":"Brah","message":"update"},{"hash":"c669f3fa4d6bb3891bb215a621239c0f8ed11a37","time":1753882640000,"email":"brah.gharbi@gmail.com","author":"Brah","message":"updated kstore + begening of SQLDelight update"},{"hash":"5fc90ff65434ad22dc9217f48adf6666e4ae2c34","time":1753864521000,"email":"brah.gharbi@gmail.com","author":"Brah","message":"update"},{"hash":"5afd2cfa1576adc95372dfd6a4125e2dd30f084e","time":1753376463000,"email":"brah.gharbi@gmail.com","author":"Brah","message":"update"},{"hash":"14a77bb70ded7a054b522f40540e3cf14a2c4132","time":1739793149000,"email":"brah.gharbi@gmail.com","author":"Brah","message":"update"},{"hash":"c252fec057b591f2f4d996848ceedf55268ebb46","time":1728049777000,"email":"brah.gharbi@gmail.com","author":"Ibrahim Gharbi","message":"Update with viewmodel"},{"hash":"712f63c398d18d0cf72ffe9ce36e3528ee0da8a8","time":1725280399000,"email":"brah.gharbi@gmail.com","author":"Ibrahim Gharbi","message":"Update User interface section , refactor sections by adding preferences"},{"hash":"785d1fba4fe089b700e03f8d29835213a4781ac4","time":1703283955000,"email":"ibrahim.gharbi@worldline.com","author":"A187839","message":"update with training feedbacks ( database, mock architecture, logging ...)"},{"hash":"955da3da35277fd9c0e54c20eeb09012de62a7dc","time":1701442875000,"email":"ibrahim.gharbi@worldline.com","author":"A187839","message":"updated title"},{"hash":"09e69198f843af201d3b6f19843c1f045de7d759","time":1701439098000,"email":"ibrahim.gharbi@worldline.com","author":"A187839","message":"update with SQLDelight working ( except JS)"},{"hash":"041d865c2c80a1f265398c3a879a422dde574a28","time":1700727316000,"email":"ibrahim.gharbi@worldline.com","author":"A187839","message":"uopdated with SQLDelight update and roadmap"},{"hash":"0950cce6d260f5eddf4e5b9365ba9dc1f7cbf109","time":1700573128000,"email":"ibrahim.gharbi@worldline.com","author":"A187839","message":"update with database"}]},"filePathRelative":"9.database/README.md","autoDesc":true}');export{u as comp,r as data};
